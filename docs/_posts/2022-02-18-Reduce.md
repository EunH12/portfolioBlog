---
title: Reduce를 이제 안다고?
tags: [Javascript, Reduce]
style: 
color: 
description: Javascript Array reduce
---


### 1. reduce 정의
`배열.reduce((누적값, 현재값, 인덱스, 요소) => { return 결과 }, 초기값)`

### 2. reduce 이해
처음엔 그냥 단순 누산기라고만 생각헀다.
아니 왜 다들 예시를 누산으로만 하냐고!!
array 에서 [a, b].reduce = a + b 일 것이라고 막연히 생각했는데
왠걸!!! 다른 행동도 너무 가능한 친구였던 것이었다.
# Reduce 너를 너무 얕봤다 미안하다!
사실 얕보게 된 이유에는 초기값을 설정 할 수 있는지 몰랐던게 가장 큰 이유였다.
MDN에서 주로 첫번째 설명만 보는 나는, [누산기 (acc) 현재 값 (cur) 현재 인덱스 (idx) 원본 배열 (src)] 만 봤었고 초기값을 설정 할 수 있는지 몰랐다.
그래서 처음엔 이 단순하고 멍청한 친구는 언제 쓰는걸까? 라고 생각했는데 멍청한건 나였다...

### 3. reduce 사용
처음 사용하게 된건 오브젝트를 키값만 뽑으면서 특정 범주의 키값을 더하고 싶어서 사용하려고 했는데, 오브젝트 안에 오브젝트를 새로운 배열로 만드는 것이라 결국 포문을 사용해서 작업을 했었다.

```
const dataSet = []
for (const item in data) {
  const obj = {}
  obj.week_day = week[item].key
  obj.level = week[item].level
  const keys = Object.values(data[item].data)
  for (const i in keys) {
    if (i % 3 === 2) {
      obj.hour_ranges = range[i]
      obj.value = keys[i] + keys[i - 1] + keys[i - 2]
      dataSet.push(deepClone(obj))
    }
  }
}
reSetData = dataSet
```
내가 만들고자 했던 것은 배열 형태, 3구역마다 하나의 오브젝트를 만들어 배열에 넣고 싶었다. 처음엔 중첩포문으로 작업했지만, 나중에 reduce로 변경했다.

그 코드는 아래와 같다.
```
const dataSet = Object.values(data).reduce((acc, item, i) => {
  Object.values(item.data).reduce((value, tem, j) => {
    if (j % 3 === 2) {
      const obj = {}
      obj.week_day = item.name
      obj.level = i === 0 ? 7 : i - 1
      obj.hour_ranges = range[j]
      obj.value = value += tem
      acc.push(deepClone(obj))
      value = 0
    } else {
      value += tem
    }
    return value
  }, 0)
  return acc
}, [])
reSetData = dataSet
```
실질적으로 포문을 두번 돌리는건 비슷해서 크게 달라진 점은 없긴 하지만
value를 `obj.value = keys[i] + keys[i - 1] + keys[i - 2]` 이런 형태로 쓰지 않아도 된다는 점이 마음에 들었다.
이제 조금 더 다양한 곳에서 써봐야겠다.

